import './home.css';
import { ConfigProvider } from 'antd';
import { createRoot } from 'react-dom/client';
import { useEffect, useState } from 'react';
import { supabase } from '../../lib/supabaseClient';
import { PageContent } from '../../components/PageContent/PageContent';

function Home() {

    const [choosenItem, setChoosenItem] = useState(undefined);
    const [isLogIn, setIsLogIn] = useState(false);

    const pageContent = [
        {
            navItem: (
                <div className={choosenItem === 0 ? 'nav-item choosen' : 'nav-item'} onClick={() => setChoosenItem(0)}>
                    <svg width="26" height="26" viewBox="0 0 38 38" fill={choosenItem === 0 ? "white" : "#98A6B4"} xmlns="http://www.w3.org/2000/svg">
                        <path d="M9.11412 28.8897H31.7137C31.7842 28.8897 31.851 28.8786 31.9141 28.8638H31.929C32.4114 28.8638 32.8047 28.4704 32.8047 27.988V3.28057C32.8047 2.79814 32.4114 2.40479 31.929 2.40479H9.11412C6.78736 2.40479 4.89479 4.29736 4.89479 6.62412C4.89479 6.65381 4.90221 6.6835 4.90221 6.71318C4.8985 8.86182 4.87252 28.6114 4.8985 31.2054C4.8985 31.2573 4.89108 31.3056 4.89108 31.3575C4.89108 33.5952 6.64264 35.4247 8.84693 35.5657C8.89147 35.5731 8.936 35.5806 8.98053 35.5806H31.9253C32.4077 35.5806 32.801 35.1872 32.801 34.7048V31.4132C32.801 30.9308 32.4077 30.5374 31.9253 30.5374C31.4428 30.5374 31.0495 30.9308 31.0495 31.4132V33.829H9.11412C7.78561 33.829 6.70201 32.7751 6.64635 31.4577C6.64635 31.4355 6.65377 31.4132 6.65006 31.3872C6.65006 31.3501 6.64635 31.287 6.64635 31.2091C6.72799 29.9214 7.80045 28.8897 9.11412 28.8897ZM9.71158 6.62412C9.71158 6.1417 10.1049 5.74834 10.5874 5.74834C11.0698 5.74834 11.4631 6.1417 11.4631 6.62412V24.3847C11.4631 24.8671 11.0698 25.2605 10.5874 25.2605C10.1049 25.2605 9.71158 24.8671 9.71158 24.3847V6.62412Z" />
                    </svg>
                    <div>单词本</div>
                </div>
            ),
        },
        {
            navItem: (
                <div className={choosenItem === 1 ? 'nav-item choosen' : 'nav-item'} onClick={() => setChoosenItem(1)} >
                    <svg width="30" height="30" viewBox="0 0 35 35" fill={choosenItem === 1 ? "white" : "#98A6B4"} xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.5833 29.75C21.5833 30.1793 21.2348 30.5278 20.8055 30.5278H14.5833C14.154 30.5278 13.8055 30.1793 13.8055 29.75C13.8055 29.3206 14.154 28.9722 14.5833 28.9722H20.8055C21.2348 28.9722 21.5833 29.3206 21.5833 29.75ZM20.8055 30.9166H14.5833C14.0715 30.9166 13.6752 31.4109 13.8456 31.948C13.9482 32.2719 14.2761 32.4722 14.616 32.4722H14.6276C15.0768 32.4722 15.4875 32.7261 15.6885 33.1279L15.6967 33.1442C15.9677 33.6855 16.5211 34.0278 17.1266 34.0278H18.2622C18.8677 34.0278 19.4211 33.6855 19.6917 33.1442L19.6999 33.1279C19.901 32.7261 20.3116 32.4722 20.7608 32.4722H20.7725C21.1123 32.4722 21.4402 32.2719 21.5428 31.948C21.7136 31.4109 21.3173 30.9166 20.8055 30.9166ZM17.6944 6.02775C18.1237 6.02775 18.4722 5.67931 18.4722 5.24997V2.13886C18.4722 1.70953 18.1237 1.36108 17.6944 1.36108C17.2651 1.36108 16.9166 1.70953 16.9166 2.13886V5.24997C16.9166 5.67931 17.2651 6.02775 17.6944 6.02775ZM9.4449 8.98914C9.59657 9.1412 9.79568 9.21703 9.99479 9.21703C10.1939 9.21703 10.393 9.1412 10.5447 8.98914C10.8484 8.68542 10.8484 8.19308 10.5447 7.88936L8.34474 5.68942C8.0414 5.3857 7.54829 5.3857 7.24496 5.68942C6.94124 5.99314 6.94124 6.48547 7.24496 6.7892L9.4449 8.98914ZM7.58329 16.1389C7.58329 15.7095 7.23485 15.3611 6.80551 15.3611H3.6944C3.26507 15.3611 2.91663 15.7095 2.91663 16.1389C2.91663 16.5682 3.26507 16.9166 3.6944 16.9166H6.80551C7.23485 16.9166 7.58329 16.5682 7.58329 16.1389ZM9.4449 23.2886L7.24496 25.4885C6.94124 25.7923 6.94124 26.2846 7.24496 26.5883C7.39663 26.7404 7.59574 26.8162 7.79485 26.8162C7.99396 26.8162 8.19307 26.7404 8.34474 26.5883L10.5447 24.3884C10.8484 24.0846 10.8484 23.5923 10.5447 23.2886C10.2413 22.9849 9.74824 22.9849 9.4449 23.2886ZM25.9439 23.2886C25.6402 22.9849 25.1478 22.9849 24.8441 23.2886C24.5404 23.5923 24.5404 24.0846 24.8441 24.3884L27.0441 26.5883C27.1961 26.7404 27.3948 26.8162 27.594 26.8162C27.7931 26.8162 27.9918 26.7404 28.1438 26.5883C28.4476 26.2846 28.4476 25.7923 28.1438 25.4885L25.9439 23.2886ZM31.6944 15.3611H28.5833C28.154 15.3611 27.8055 15.7095 27.8055 16.1389C27.8055 16.5682 28.154 16.9166 28.5833 16.9166H31.6944C32.1237 16.9166 32.4722 16.5682 32.4722 16.1389C32.4722 15.7095 32.1237 15.3611 31.6944 15.3611ZM25.394 9.21703C25.5931 9.21703 25.7918 9.1412 25.9439 8.98914L28.1438 6.7892C28.4476 6.48547 28.4476 5.99314 28.1438 5.68942C27.8401 5.3857 27.3478 5.3857 27.0441 5.68942L24.8441 7.88936C24.5404 8.19308 24.5404 8.68542 24.8441 8.98914C24.9958 9.1412 25.1949 9.21703 25.394 9.21703ZM21.5833 27.8055C21.5833 28.2349 21.2348 28.5833 20.8055 28.5833H14.5833C14.154 28.5833 13.8055 28.2349 13.8055 27.8055C13.8055 27.3914 14.1302 27.0558 14.5386 27.0324C14.0544 22.6559 9.52774 21.6809 9.52774 16.5277C9.52774 12.0174 13.1841 8.36108 17.6944 8.36108C22.2047 8.36108 25.8611 12.0174 25.8611 16.5277C25.8611 21.6809 21.3344 22.6559 20.8502 27.0324C21.2586 27.0558 21.5833 27.3914 21.5833 27.8055ZM15.902 10.5428C15.7811 10.2445 15.4416 10.101 15.1421 10.2211C13.1545 11.0265 11.6476 12.7481 11.1113 14.8264C11.0308 15.1386 11.2186 15.4564 11.5305 15.5369C11.5791 15.5497 11.6281 15.5555 11.6763 15.5555C11.9361 15.5555 12.173 15.3809 12.241 15.118C12.6851 13.396 13.9335 11.9696 15.58 11.3026C15.8787 11.1817 16.0226 10.8418 15.902 10.5428Z" />
                    </svg>
                    <div>温故知新</div>
                </div >
            ),
        },
        {
            navItem: (
                <div className={choosenItem === 2 ? 'nav-item choosen' : 'nav-item'} onClick={() => setChoosenItem(2)}>
                    <svg viewBox="0 0 1024 1024" width="24" height="24" fill={choosenItem === 2 ? "white" : "#98A6B4"} >
                        <path d="M114.8875 433C172.7125 235.375 299.4875 94.425 531.3 74.325c15.9625-1.4 38.3125-0.1375 56.5375-3.5875 15.7-3.1 34.8625-14.35 52.95-21.85 73.4375-30 235.7375-82.85 317.6875-18.0625 71.1 56.3375 58 193.3 14.1 282.6375 35 70.575 61 168.8875 45.9 278.975-205.9375 8.45-445.9375 1.125-645.9875 3.6625 6.7125 106.25 73.6625 187.7125 172.9875 199.2125 97.05 11.25 164.1625-43.4375 208.2625-105h247.05c-64.1875 183.85-227.3625 326.4625-480 307.975-57.5-4.2625-102.2375-20.95-151.825-39.9125C286.1375 1003.5125 103 1070.5625 30.125 976.3875c-55.3375-71.4375-19.7875-201.4125 10.575-286.1625C102.1625 518.6 219.1625 348.5125 333.6375 251.8625c0.6625-3 3.525-3.6625 3.525-7.25C246.7375 290.65 185.75 366.9375 114.8875 433z m868.275-268.075c-3.4-123.325-162.9-111.25-247.1125-61.6 94.05 37.5 162.7 101.1125 218.8375 177.5 12.2375-38.75 29.5375-70.85 28.275-115.875zM372.4875 465.5875h391.825c-11.375-251.975-379.5125-231.6125-391.825 0zM83.0375 907.6375c19.65 111.55 176.25 79.0875 247.1125 29-92.95-51.9875-150.8625-139.85-197.6875-239.175-21.725 53.75-62.3875 136.5-49.425 210.2z"></path>
                    </svg>
                    <div>英文网站</div>
                </div>
            ),
        },
        {
            navItem: (
                <div className={choosenItem === 3 ? 'nav-item choosen' : 'nav-item'} onClick={() => setChoosenItem(3)}>
                    <svg width="28" height="28" viewBox="0 0 36 36" fill={choosenItem === 3 ? "white" : "#98A6B4"} xmlns="http://www.w3.org/2000/svg">
                        <path d="M26.6976 1.04761H8.65796C6.96236 1.04761 5.58716 2.42281 5.58716 4.11841V31.9464C5.58716 33.642 6.96236 35.0172 8.65796 35.0172H16.2396H20.4552H26.6976C28.3932 35.0172 29.7684 33.642 29.7684 31.9464V4.11841C29.7684 2.42281 28.3932 1.04761 26.6976 1.04761ZM14.706 3.23641H20.6496C20.9448 3.23641 21.186 3.47761 21.186 3.77281C21.186 4.06801 20.9448 4.30921 20.6496 4.30921H14.706C14.4108 4.30921 14.1696 4.06801 14.1696 3.77281C14.1696 3.47761 14.4108 3.23641 14.706 3.23641ZM17.6796 31.4532C16.4844 31.4532 15.516 30.4848 15.516 29.2896C15.516 28.0944 16.4844 27.126 17.6796 27.126C18.8748 27.126 19.8432 28.0944 19.8432 29.2896C19.8396 30.4848 18.8712 31.4532 17.6796 31.4532ZM27.522 23.4504C27.522 23.8752 27.18 24.2172 26.7552 24.2172H8.60036C8.17556 24.2172 7.83356 23.8752 7.83356 23.4504V7.10641C7.83356 6.68161 8.17556 6.33961 8.60036 6.33961H26.7516C27.1764 6.33961 27.5184 6.68161 27.5184 7.10641V23.4504H27.522Z" />
                    </svg>
                    <div>移动端</div>
                </div>
            ),
        },
        {
            navItem: (
                <div className={choosenItem === 4 ? 'nav-item choosen' : 'nav-item'} onClick={() => setChoosenItem(4)}>
                    <svg width="25" height="25" viewBox="0 0 31 29" fill={choosenItem === 4 ? "white" : "#98A6B4"}>
                        <path d="M15.9018 20.6673C17.1535 20.6673 18.3772 20.3056 19.4179 19.628C20.4587 18.9503 21.2699 17.9871 21.749 16.8601C22.228 15.7332 22.3533 14.4932 22.1091 13.2968C21.8649 12.1005 21.2621 11.0016 20.377 10.139C19.4919 9.27653 18.3642 8.68915 17.1365 8.45118C15.9088 8.21321 14.6362 8.33535 13.4798 8.80214C12.3233 9.26893 11.3349 10.0594 10.6394 11.0736C9.94399 12.0878 9.5728 13.2802 9.5728 14.5C9.57804 16.1341 10.2465 17.6998 11.4323 18.8553C12.6181 20.0108 14.2248 20.6622 15.9018 20.6673ZM1.12096 14.5C1.11936 13.4812 1.21902 12.4647 1.41856 11.4647C2.30205 11.3699 3.14913 11.0692 3.88815 10.5879C4.62717 10.1067 5.2364 9.45915 5.66432 8.70001C6.1204 7.90476 6.37782 7.01601 6.41574 6.10575C6.45366 5.19549 6.271 4.28933 5.88256 3.46068C7.45211 1.97537 9.34371 0.852224 11.4179 0.174011C11.9086 0.91626 12.5826 1.52669 13.378 1.94941C14.1735 2.37213 15.0651 2.59363 15.9712 2.59363C16.8773 2.59363 17.7689 2.37213 18.5644 1.94941C19.3598 1.52669 20.0338 0.91626 20.5245 0.174011C22.595 0.866732 24.4797 2.00305 26.04 3.49934C25.6641 4.32583 25.4917 5.2265 25.5364 6.12946C25.5812 7.03243 25.842 7.9127 26.2979 8.70001C26.7155 9.42646 27.3 10.0488 28.0056 10.5184C28.7112 10.988 29.5188 11.292 30.3651 11.4067C30.8041 13.5942 30.7635 15.8475 30.2461 18.0187C29.4124 18.1549 28.6217 18.4748 27.934 18.9539C27.2464 19.433 26.68 20.0587 26.2781 20.7833C25.8663 21.5019 25.6162 22.2976 25.5444 23.1176C25.4726 23.9376 25.5806 24.7632 25.8614 25.5393C24.2554 27.0555 22.3144 28.193 20.1872 28.8647C19.6826 28.234 19.037 27.7238 18.2995 27.3729C17.5621 27.022 16.7522 26.8396 15.9315 26.8396C15.1108 26.8396 14.301 27.022 13.5635 27.3729C12.8261 27.7238 12.1805 28.234 11.6758 28.8647C9.55545 28.2168 7.61476 27.106 6.0016 25.6167C6.30626 24.8268 6.43037 23.9816 6.36526 23.1401C6.30016 22.2986 6.0474 21.4811 5.62464 20.7447C5.21053 19.9966 4.62086 19.3545 3.90371 18.8707C3.18656 18.3869 2.36223 18.0751 1.49792 17.9607C1.24136 16.8242 1.11494 15.6636 1.12096 14.5Z" />
                    </svg>
                    <div>账号&设置</div>
                </div>
            ),
        }
    ];

    //链接参数处理逻辑
    useEffect(() => {
        let queryString = window.location.search;
        let item = 0;

        if (queryString) {
            queryString = queryString.substring(1);
            if (queryString.split('=')[0] === 'item') {
                item = Number(queryString.split('=')[1]);
            }
        }

        setChoosenItem(item);
    }, []);

    //获取登录态
    useEffect(() => {
        supabase.auth.getSession().then(res => {
            const { data: { session } } = res;
            if (session) {
                setIsLogIn(true);
            }
        });
    }, []);

    return (
        <ConfigProvider theme={{
            token: {
                colorPrimary: '#83D9F4',
                colorText: '#98A6B4',
            }
        }}>
            <div className='page'>
                <div className='leftside-nav'>
                    {
                        pageContent.map((item) => {
                            return (
                                item.navItem
                            )
                        })
                    }
                </div>
                <div className='content'>
                    <PageContent choosenItem={choosenItem} isLogIn={isLogIn}></PageContent>
                </div>
            </div>
        </ConfigProvider>

    )
}

const root = createRoot(document.getElementById('root'));
root.render(<Home></Home>);

